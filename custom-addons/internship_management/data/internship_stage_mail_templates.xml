<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!-- Modèle d'e-mail pour la création d'un stage -->
        <record id="mail_template_stage_creation" model="mail.template">
            <field name="name">Stage : Notification de Création</field>
            <field name="model_id" ref="internship_management.model_internship_stage"/>
            <field name="subject">Nouveau Stage : {{ object.title }}</field>
            <field name="email_from">{{ user.email_formatted }}</field>
            <field name="email_to">{{ object.supervisor_id.user_id.email_formatted if object.supervisor_id and object.supervisor_id.user_id else user.email_formatted }}</field>
            <field name="body_html" type="html">
                <div style="font-family: 'Lucica Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 12px; color: rgb(34, 34, 34); background-color: #FFF; ">
                    <p>Bonjour,</p>
                    <p>Un nouveau stage a été créé et vous êtes impliqué(e) dans celui-ci.</p>
                    
                    <h2 style="font-size: 16px; font-weight: bold; color: #875A7B;">{{ object.title }}</h2>
                    
                    <div style="margin: 20px 0;">
                        <h3 style="font-size: 14px; font-weight: bold; margin-bottom: 10px;">Informations du Stage</h3>
                        <ul style="list-style-type: none; padding: 0;">
                            <li style="margin: 5px 0;">
                                <strong>Numéro de Référence :</strong> {{ object.reference_number }}
                            </li>
                            <li style="margin: 5px 0;">
                                <strong>Type de Stage :</strong> {{ object.internship_type or 'Non spécifié' }}
                            </li>
                            <li t-if="object.start_date" style="margin: 5px 0;">
                                <strong>Date de Début :</strong> {{ object.start_date.strftime('%d/%m/%Y') }}
                            </li>
                            <li t-if="object.end_date" style="margin: 5px 0;">
                                <strong>Date de Fin :</strong> {{ object.end_date.strftime('%d/%m/%Y') }}
                            </li>
                            <li t-if="object.supervisor_id" style="margin: 5px 0;">
                                <strong>Encadrant(e) :</strong> {{ object.supervisor_id.name }}
                            </li>
                        </ul>
                    </div>

                    <div t-if="object.student_ids" style="margin: 20px 0;">
                        <h3 style="font-size: 14px; font-weight: bold; margin-bottom: 10px;">Étudiants Assignés</h3>
                        <ul style="list-style-type: disc; padding-left: 20px;">
                            <li t-foreach="object.student_ids" t-as="student" style="margin: 5px 0;">
                                {{ student.name }} ({{ student.full_name }})
                            </li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0; padding: 15px; background-color: #F5F5F5; border-left: 4px solid #875A7B;">
                        <p style="margin: 0;">
                            <strong>Prochaines Étapes :</strong>
                        </p>
                        <ul style="list-style-type: disc; padding-left: 20px; margin-top: 10px;">
                            <li>Deux plannings ont été automatiquement créés pour les deux premières semaines</li>
                            <li>Consultez les détails du stage dans le système</li>
                            <li>Contactez l'encadrant(e) pour toute question</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0; text-align: center;">
                        <a t-att-href="'%s/web#id=%s&amp;model=internship.stage&amp;view_type=form' % (object.get_base_url(), object.id)" 
                           style="background-color: #875A7B; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block;">
                            Voir les Détails du Stage
                        </a>
                    </div>

                    <br/>
                    <p>Cordialement,</p>
                    <p>
                        <em>-- Système de Gestion de Stages</em>
                    </p>
                </div>
            </field>
            <field name="auto_delete" eval="False"/>
        </record>

    </data>
</odoo>


<?xml version="1.0" encoding="utf-8"?>
<odoo noupdate="1">
    <data>
        
        <!-- ================================= -->
        <!-- BASE RECORDS FOR TESTING -->
        <!-- ================================= -->
        
        <!-- Test Stage -->
        <record id="test_internship_stage_1" model="internship.stage">
            <field name="title">Stage Test - Développement Web</field>
            <field name="reference_number">STG-2024-001</field>
            <field name="internship_type">development</field>
            <field name="start_date" eval="(DateTime.now() - timedelta(days=30)).strftime('%Y-%m-%d')"/>
            <field name="end_date" eval="(DateTime.now() + timedelta(days=30)).strftime('%Y-%m-%d')"/>
            <field name="state">in_progress</field>
            <field name="student_id" ref="base.user_admin"/>
            <field name="supervisor_id" ref="base.user_admin"/>
        </record>

        <!-- Test Document -->
        <record id="test_internship_document_1" model="internship.document">
            <field name="name">Rapport Intermédiaire - Analyse des Processus</field>
            <field name="document_type">report</field>
            <field name="stage_id" ref="test_internship_stage_1"/>
            <field name="description">Analyse détaillée des processus métier de l'entreprise</field>
            <field name="state">under_review</field>
        </record>

        <!-- Test Meeting -->
        <record id="test_internship_meeting_1" model="internship.meeting">
            <field name="name">Réunion de Suivi Hebdomadaire</field>
            <field name="meeting_type">follow_up</field>
            <field name="stage_id" ref="test_internship_stage_1"/>
            <field name="date" eval="(DateTime.now() + timedelta(days=1)).strftime('%Y-%m-%d %H:%M:%S')"/>
            <field name="duration">1.0</field>
            <field name="state">confirmed</field>
        </record>
        
        <!-- ================================= -->
        <!-- TEST COMMUNICATIONS -->
        <!-- ================================= -->
        
        <!-- Communication 1: Message interne entre étudiant et superviseur -->
        <record id="test_communication_1" model="internship.communication">
            <field name="subject">Demande de clarification sur les objectifs</field>
            <field name="content">
                <p>Bonjour Monsieur/Madame,</p>
                <p>J'aimerais avoir des précisions sur les objectifs spécifiques de mon stage. 
                Pourriez-vous m'expliquer plus en détail ce qui est attendu pour le rapport final ?</p>
                <p>Merci d'avance.</p>
                <p>Cordialement,</p>
            </field>
            <field name="communication_type">internal_message</field>
            <field name="priority">1</field>
            <field name="stage_id" ref="test_internship_stage_1"/>
            <field name="sender_id" ref="base.user_admin"/>
            <field name="recipient_ids" eval="[(6, 0, [ref('base.user_admin')])]"/>
            <field name="state">sent</field>
        </record>

        <!-- Communication 2: Notification système -->
        <record id="test_communication_2" model="internship.communication">
            <field name="subject">Nouveau stage assigné</field>
            <field name="content">
                <p>Félicitations ! Vous avez été assigné à un nouveau stage.</p>
                <p>Veuillez consulter les détails et commencer votre travail.</p>
            </field>
            <field name="communication_type">system_notification</field>
            <field name="priority">2</field>
            <field name="stage_id" ref="test_internship_stage_1"/>
            <field name="sender_id" ref="base.user_admin"/>
            <field name="state">sent</field>
        </record>

        <!-- Communication 3: Demande d'approbation -->
        <record id="test_communication_3" model="internship.communication">
            <field name="subject">Demande d'approbation - Rapport intermédiaire</field>
            <field name="content">
                <p>Bonjour,</p>
                <p>J'ai terminé la première version de mon rapport intermédiaire. 
                Pourriez-vous le réviser et me faire vos commentaires ?</p>
                <p>Le document est disponible dans la section Documents.</p>
            </field>
            <field name="communication_type">approval_request</field>
            <field name="priority">2</field>
            <field name="stage_id" ref="test_internship_stage_1"/>
            <field name="sender_id" ref="base.user_admin"/>
            <field name="recipient_ids" eval="[(6, 0, [ref('base.user_admin')])]"/>
            <field name="state">sent</field>
        </record>

        <!-- Communication 4: Rappel de deadline -->
        <record id="test_communication_4" model="internship.communication">
            <field name="subject">Rappel - Échéance du rapport final</field>
            <field name="content">
                <p>Rappel important : La date limite pour la soumission du rapport final approche.</p>
                <p>Date limite : 15 Décembre 2024</p>
                <p>Veuillez vous assurer de soumettre votre travail à temps.</p>
            </field>
            <field name="communication_type">deadline_reminder</field>
            <field name="priority">3</field>
            <field name="stage_id" ref="test_internship_stage_1"/>
            <field name="sender_id" ref="base.user_admin"/>
            <field name="recipient_ids" eval="[(6, 0, [ref('base.user_admin')])]"/>
            <field name="state">sent</field>
        </record>

        <!-- Communication 5: Réponse à une communication -->
        <record id="test_communication_5" model="internship.communication">
            <field name="subject">Re: Demande de clarification sur les objectifs</field>
            <field name="content">
                <p>Bonjour,</p>
                <p>Merci pour votre question. Les objectifs de votre stage sont :</p>
                <ul>
                    <li>Analyser les processus métier de l'entreprise</li>
                    <li>Proposer des améliorations</li>
                    <li>Rédiger un rapport détaillé</li>
                </ul>
                <p>N'hésitez pas si vous avez d'autres questions.</p>
            </field>
            <field name="communication_type">internal_message</field>
            <field name="priority">1</field>
            <field name="stage_id" ref="test_internship_stage_1"/>
            <field name="sender_id" ref="base.user_admin"/>
            <field name="recipient_ids" eval="[(6, 0, [ref('base.user_admin')])]"/>
            <field name="parent_id" ref="test_communication_1"/>
            <field name="state">sent</field>
        </record>

        <!-- ================================= -->
        <!-- TEST DOCUMENT FEEDBACK -->
        <!-- ================================= -->
        
        <!-- Feedback 1: Commentaire positif -->
        <record id="test_feedback_1" model="internship.document.feedback">
            <field name="feedback_summary">Excellent travail sur l'analyse</field>
            <field name="detailed_feedback">
                <p>Très bon travail ! Votre analyse des processus métier est très détaillée et pertinente.</p>
                <p><strong>Points positifs :</strong></p>
                <ul>
                    <li>Analyse approfondie des processus existants</li>
                    <li>Recommandations pratiques et réalisables</li>
                    <li>Présentation claire et structurée</li>
                </ul>
                <p>Continuez dans cette direction !</p>
            </field>
            <field name="feedback_type">praise</field>
            <field name="priority">1</field>
            <field name="document_id" ref="test_internship_document_1"/>
            <field name="reviewer_id" ref="base.user_admin"/>
            <field name="status">resolved</field>
            <field name="response_date" eval="(DateTime.now() + timedelta(hours=2)).strftime('%Y-%m-%d %H:%M:%S')"/>
            <field name="response_by" ref="base.user_admin"/>
        </record>

        <!-- Feedback 2: Demande de révision -->
        <record id="test_feedback_2" model="internship.document.feedback">
            <field name="feedback_summary">Révision nécessaire - Section méthodologie</field>
            <field name="detailed_feedback">
                <p>Le document est globalement bon, mais la section méthodologie nécessite des améliorations.</p>
                <p><strong>Points à améliorer :</strong></p>
                <ul>
                    <li>Ajouter plus de détails sur la méthode d'analyse utilisée</li>
                    <li>Expliquer le choix des outils et techniques</li>
                    <li>Inclure des exemples concrets</li>
                </ul>
                <p>Veuillez réviser cette section et me soumettre une nouvelle version.</p>
            </field>
            <field name="feedback_type">revision_required</field>
            <field name="priority">2</field>
            <field name="document_id" ref="test_internship_document_1"/>
            <field name="reviewer_id" ref="base.user_admin"/>
            <field name="status">pending</field>
        </record>

        <!-- Feedback 3: Question -->
        <record id="test_feedback_3" model="internship.document.feedback">
            <field name="feedback_summary">Question sur les données utilisées</field>
            <field name="detailed_feedback">
                <p>Bonjour,</p>
                <p>J'ai une question concernant les données que vous avez utilisées dans votre analyse :</p>
                <ul>
                    <li>D'où proviennent ces données ?</li>
                    <li>Sont-elles récentes et fiables ?</li>
                    <li>Avez-vous vérifié leur exactitude ?</li>
                </ul>
                <p>Pourriez-vous me donner plus d'informations à ce sujet ?</p>
            </field>
            <field name="feedback_type">question</field>
            <field name="priority">1</field>
            <field name="document_id" ref="test_internship_document_1"/>
            <field name="reviewer_id" ref="base.user_admin"/>
            <field name="status">acknowledged</field>
        </record>

        <!-- Feedback 4: Suggestion -->
        <record id="test_feedback_4" model="internship.document.feedback">
            <field name="feedback_summary">Suggestion d'amélioration</field>
            <field name="detailed_feedback">
                <p>Excellente analyse ! J'ai une suggestion pour améliorer encore le document :</p>
                <p><strong>Suggestion :</strong></p>
                <p>Ajouter une section sur l'impact financier des recommandations proposées. 
                Cela rendrait votre analyse encore plus complète et convaincante.</p>
                <p>Qu'en pensez-vous ?</p>
            </field>
            <field name="feedback_type">suggestion</field>
            <field name="priority">1</field>
            <field name="document_id" ref="test_internship_document_1"/>
            <field name="reviewer_id" ref="base.user_admin"/>
            <field name="status">resolved</field>
            <field name="response_date" eval="(DateTime.now() + timedelta(hours=1)).strftime('%Y-%m-%d %H:%M:%S')"/>
            <field name="response_by" ref="base.user_admin"/>
        </record>

        <!-- Feedback 5: Approbation -->
        <record id="test_feedback_5" model="internship.document.feedback">
            <field name="feedback_summary">Document approuvé</field>
            <field name="detailed_feedback">
                <p>Parfait ! Le document répond parfaitement aux exigences.</p>
                <p><strong>Approbation :</strong></p>
                <ul>
                    <li>Contenu conforme aux attentes</li>
                    <li>Qualité de rédaction excellente</li>
                    <li>Recommandations pertinentes</li>
                </ul>
                <p>Vous pouvez procéder à la soumission finale.</p>
            </field>
            <field name="feedback_type">approval</field>
            <field name="priority">1</field>
            <field name="document_id" ref="test_internship_document_1"/>
            <field name="reviewer_id" ref="base.user_admin"/>
            <field name="status">resolved</field>
            <field name="response_date" eval="(DateTime.now() + timedelta(hours=3)).strftime('%Y-%m-%d %H:%M:%S')"/>
            <field name="response_by" ref="base.user_admin"/>
        </record>

        <!-- ================================= -->
        <!-- TEST MEETING COMMUNICATIONS -->
        <!-- ================================= -->
        
        <!-- Communication liée à un meeting -->
        <record id="test_meeting_communication_1" model="internship.communication">
            <field name="subject">Notes de réunion - Suivi hebdomadaire</field>
            <field name="content">
                <p><strong>Résumé de la réunion du 10 Décembre 2024 :</strong></p>
                <ul>
                    <li>Révision des objectifs du stage</li>
                    <li>Discussion sur les défis rencontrés</li>
                    <li>Planification des prochaines étapes</li>
                </ul>
                <p><strong>Actions à suivre :</strong></p>
                <ul>
                    <li>Finaliser l'analyse des processus</li>
                    <li>Préparer la présentation finale</li>
                    <li>Réviser le rapport selon les commentaires</li>
                </ul>
            </field>
            <field name="communication_type">meeting_note</field>
            <field name="priority">1</field>
            <field name="stage_id" ref="test_internship_stage_1"/>
            <field name="meeting_id" ref="test_internship_meeting_1"/>
            <field name="sender_id" ref="base.user_admin"/>
            <field name="recipient_ids" eval="[(6, 0, [ref('base.user_admin')])]"/>
            <field name="state">sent</field>
        </record>

    </data>
</odoo>

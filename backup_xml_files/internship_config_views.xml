<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- ===============================
             SKILLS VIEWS
        =============================== -->

        <!-- Skills list view -->
        <record id="view_internship_skill_tree" model="ir.ui.view">
            <field name="name">internship.skill.tree</field>
            <field name="model">internship.skill</field>
            <field name="arch" type="xml">
                <tree string="Skills" create="true" editable="false">
                    <field name="name"/>
                    <field name="category"/>
                    <field name="subcategory"/>
                    <field name="level_required"/>
                    <field name="is_certification"/>
                    <field name="difficulty_level"/>
                    <field name="active" widget="boolean_toggle"/>
                </tree>
            </field>
        </record>

        <!-- Skills form view -->
        <record id="view_internship_skill_form" model="ir.ui.view">
            <field name="name">internship.skill.form</field>
            <field name="model">internship.skill</field>
            <field name="arch" type="xml">
                <form string="Skill">
                    <sheet>
                        <div class="oe_title">
                            <h1><field name="name" placeholder="Skill name"/></h1>
                        </div>
                        <group>
                            <group name="basic_info" string="Basic Information">
                                <field name="code"/>
                                <field name="category"/>
                                <field name="subcategory"/>
                                <field name="level_required"/>
                            </group>
                            <group name="details" string="Details">
                                <field name="difficulty_level"/>
                                <field name="is_certification"/>
                                <field name="certification_provider" attrs="{'invisible': [('is_certification', '=', False)]}"/>
                                <field name="certification_validity_months" attrs="{'invisible': [('is_certification', '=', False)]}"/>
                            </group>
                        </group>

                        <group name="description" string="Description">
                            <field name="description" nolabel="1"/>
                        </group>

                        <notebook>
                            <page name="related_skills" string="Related Skills">
                                <field name="prerequisite_skill_ids" string="Prerequisites">
                                    <tree>
                                        <field name="name"/>
                                        <field name="category"/>
                                        <field name="level_required"/>
                                    </tree>
                                </field>
                            </page>

                            <page name="metadata" string="Metadata">
                                <group>
                                    <group name="system" string="System">
                                        <field name="active"/>
                                        <field name="sequence"/>
                                    </group>
                                    <group name="dates" string="Dates">
                                        <field name="create_date" readonly="1"/>
                                        <field name="write_date" readonly="1"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Skills Search View -->
        <record id="view_internship_skill_search" model="ir.ui.view">
            <field name="name">internship.skill.search</field>
            <field name="model">internship.skill</field>
            <field name="arch" type="xml">
                <search string="Search Skills">
                    <!-- Search Fields -->
                    <field name="name"/>
                    <field name="code"/>
                    <field name="category"/>
                    <field name="subcategory"/>

                    <!-- Filters -->
                    <filter string="Technical Skills" name="technical" domain="[('category', '=', 'technical')]"/>
                    <filter string="Soft Skills" name="soft" domain="[('category', '=', 'soft')]"/>
                    <filter string="Languages" name="languages" domain="[('category', '=', 'language')]"/>
                    <filter string="Certifications" name="certifications" domain="[('is_certification', '=', True)]"/>

                    <!-- Level Filters -->
                    <separator/>
                    <filter string="Beginner" name="beginner" domain="[('level_required', '=', 'beginner')]"/>
                    <filter string="Intermediate" name="intermediate" domain="[('level_required', '=', 'intermediate')]"/>
                    <filter string="Advanced" name="advanced" domain="[('level_required', '=', 'advanced')]"/>
                    <filter string="Expert" name="expert" domain="[('level_required', '=', 'expert')]"/>

                    <!-- Group By -->
                    <group expand="0" string="Group By">
                        <filter string="Category" name="group_category" context="{'group_by': 'category'}"/>
                        <filter string="Subcategory" name="group_subcategory" context="{'group_by': 'subcategory'}"/>
                        <filter string="Level Required" name="group_level" context="{'group_by': 'level_required'}"/>
                        <filter string="Difficulty" name="group_difficulty" context="{'group_by': 'difficulty_level'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- Action for skills -->
        <record id="action_internship_skill_list" model="ir.actions.act_window">
            <field name="name">Skills</field>
            <field name="res_model">internship.skill</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create a new skill
                </p>
                <p>
                    Manage here all available skills for internships.
                </p>
            </field>
        </record>

        <!-- ===============================
             EXPERTISE AREAS VIEWS
        =============================== -->

        <!-- Areas list view -->
        <record id="view_internship_area_tree" model="ir.ui.view">
            <field name="name">internship.area.tree</field>
            <field name="model">internship.area</field>
            <field name="arch" type="xml">
                <tree string="Expertise Areas" create="true" editable="false">
                    <field name="name"/>
                    <field name="parent_id"/>
                    <field name="code"/>
                    <field name="active" widget="boolean_toggle"/>
                </tree>
            </field>
        </record>

        <!-- Areas form view -->
        <record id="view_internship_area_form" model="ir.ui.view">
            <field name="name">internship.area.form</field>
            <field name="model">internship.area</field>
            <field name="arch" type="xml">
                <form string="Expertise Area">
                    <sheet>
                        <div class="oe_title">
                            <h1><field name="name" placeholder="Area name"/></h1>
                        </div>
                        <group>
                            <group name="basic_info" string="Basic Information">
                                <field name="code"/>
                                <field name="parent_id"/>
                            </group>
                            <group name="system" string="System">
                                <field name="active"/>
                                <field name="sequence"/>
                            </group>
                        </group>

                        <group name="description" string="Description">
                            <field name="description" nolabel="1"/>
                        </group>

                        <notebook>
                            <page name="subdomains" string="Sub-areas">
                                <field name="child_ids">
                                    <tree editable="bottom">
                                        <field name="name"/>
                                        <field name="code"/>
                                        <field name="active"/>
                                    </tree>
                                </field>
                            </page>

                            <page name="related_skills" string="Related Skills">
                                <field name="skill_ids">
                                    <tree>
                                        <field name="name"/>
                                        <field name="category"/>
                                        <field name="level_required"/>
                                    </tree>
                                </field>
                            </page>

                            <page name="supervisors" string="Supervisors">
                                <field name="supervisor_ids">
                                    <tree>
                                        <field name="name"/>
                                        <field name="department"/>
                                        <field name="position"/>
                                        <field name="availability_status"/>
                                    </tree>
                                </field>
                            </page>

                            <page name="metadata" string="Metadata">
                                <group>
                                    <group name="dates" string="Dates">
                                        <field name="create_date" readonly="1"/>
                                        <field name="write_date" readonly="1"/>
                                    </group>
                                    <group name="users" string="Users">
                                        <field name="create_uid" readonly="1"/>
                                        <field name="write_uid" readonly="1"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Areas Search View -->
        <record id="view_internship_area_search" model="ir.ui.view">
            <field name="name">internship.area.search</field>
            <field name="model">internship.area</field>
            <field name="arch" type="xml">
                <search string="Search Areas">
                    <!-- Search Fields -->
                    <field name="name"/>
                    <field name="code"/>
                    <field name="parent_id"/>

                    <!-- Filters -->
                    <filter string="Top Level Areas" name="top_level" domain="[('parent_id', '=', False)]"/>
                    <filter string="Sub Areas" name="sub_areas" domain="[('parent_id', '!=', False)]"/>

                    <!-- Group By -->
                    <group expand="0" string="Group By">
                        <filter string="Parent Area" name="group_parent" context="{'group_by': 'parent_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- Action for areas -->
        <record id="action_internship_area_list" model="ir.actions.act_window">
            <field name="name">Expertise Areas</field>
            <field name="res_model">internship.area</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create a new area
                </p>
                <p>
                    Manage here all available expertise areas.
                </p>
            </field>
        </record>

        <!-- ===============================
             MEETING VIEWS
        =============================== -->

        <!-- Meeting Tree View -->
        <record id="view_internship_meeting_tree" model="ir.ui.view">
            <field name="name">internship.meeting.tree</field>
            <field name="model">internship.meeting</field>
            <field name="arch" type="xml">
                <tree string="Meetings"
                      decoration-info="state=='scheduled'"
                      decoration-warning="state=='in_progress'"
                      decoration-success="state=='completed'"
                      decoration-danger="state=='cancelled'">
                    <field name="name"/>
                    <field name="meeting_type"/>
                    <field name="internship_id"/>
                    <field name="student_id"/>
                    <field name="supervisor_id"/>
                    <field name="start_datetime"/>
                    <field name="duration"/>
                    <field name="location"/>
                    <field name="state" widget="badge"/>
                </tree>
            </field>
        </record>

        <!-- Meeting Form View -->
        <record id="view_internship_meeting_form" model="ir.ui.view">
            <field name="name">internship.meeting.form</field>
            <field name="model">internship.meeting</field>
            <field name="arch" type="xml">
                <form string="Meeting">
                    <header>
                        <button name="action_confirm" string="Confirm" type="object"
                                class="oe_highlight"
                                attrs="{'invisible': [('state', '!=', 'scheduled')]}"/>
                        <button name="action_start" string="Start Meeting" type="object"
                                class="oe_highlight"
                                attrs="{'invisible': [('state', '!=', 'confirmed')]}"/>
                        <button name="action_complete" string="Complete" type="object"
                                class="oe_highlight"
                                attrs="{'invisible': [('state', '!=', 'in_progress')]}"/>
                        <button name="action_cancel" string="Cancel" type="object"
                                attrs="{'invisible': [('state', 'in', ['completed', 'cancelled'])]}"/>
                        <field name="state" widget="statusbar" statusbar_visible="scheduled,confirmed,in_progress,completed"/>
                    </header>

                    <sheet>
                        <div class="oe_title">
                            <h1><field name="name" placeholder="Meeting title..."/></h1>
                        </div>

                        <group>
                            <group name="meeting_info" string="Meeting Information">
                                <field name="meeting_type"/>
                                <field name="internship_id"/>
                                <field name="student_id"/>
                                <field name="supervisor_id"/>
                            </group>
                            <group name="schedule" string="Schedule">
                                <field name="start_datetime"/>
                                <field name="duration"/>
                                <field name="end_datetime" readonly="1"/>
                                <field name="location"/>
                                <field name="meeting_url" widget="url"/>
                            </group>
                        </group>

                        <notebook>
                            <page name="agenda" string="Agenda">
                                <field name="agenda" nolabel="1" placeholder="Meeting agenda..."/>
                            </page>

                            <page name="notes" string="Meeting Notes">
                                <field name="notes" nolabel="1" placeholder="Meeting notes and discussions..."/>
                            </page>

                            <page name="attendees" string="Attendees">
                                <field name="attendee_ids">
                                    <tree editable="bottom">
                                        <field name="user_id"/>
                                        <field name="attendance_status"/>
                                        <field name="attendance_confirmed"/>
                                    </tree>
                                </field>
                            </page>

                            <page name="follow_up" string="Follow-up">
                                <group>
                                    <field name="follow_up_required"/>
                                    <field name="next_meeting_date" attrs="{'invisible': [('follow_up_required', '=', False)]}"/>
                                    <field name="action_items" attrs="{'invisible': [('follow_up_required', '=', False)]}"/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>

                    <!-- Chatter -->
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="activity_ids"/>
                        <field name="message_ids"/>
                    </div>
                </form>
            </field>
        </record>

        <!-- Meeting Search View -->
        <record id="view_internship_meeting_search" model="ir.ui.view">
            <field name="name">internship.meeting.search</field>
            <field name="model">internship.meeting</field>
            <field name="arch" type="xml">
                <search string="Search Meetings">
                    <!-- Search Fields -->
                    <field name="name"/>
                    <field name="student_id"/>
                    <field name="supervisor_id"/>
                    <field name="internship_id"/>

                    <!-- Filters -->
                    <filter string="My Meetings" name="my_meetings"
                            domain="['|', ('student_id.user_id', '=', uid), ('supervisor_id.user_id', '=', uid)]"/>
                    <filter string="Today" name="today"
                            domain="[('start_datetime', '&gt;=', context_today()), ('start_datetime', '&lt;', (context_today() + datetime.timedelta(days=1)))]"/>
                    <filter string="This Week" name="this_week"
                            domain="[('start_datetime', '&gt;=', context_today()), ('start_datetime', '&lt;', (context_today() + datetime.timedelta(days=7)))]"/>

                    <!-- State Filters -->
                    <separator/>
                    <filter string="Scheduled" name="scheduled" domain="[('state', '=', 'scheduled')]"/>
                    <filter string="Confirmed" name="confirmed" domain="[('state', '=', 'confirmed')]"/>
                    <filter string="In Progress" name="in_progress" domain="[('state', '=', 'in_progress')]"/>
                    <filter string="Completed" name="completed" domain="[('state', '=', 'completed')]"/>

                    <!-- Type Filters -->
                    <separator/>
                    <filter string="Initial Meeting" name="initial" domain="[('meeting_type', '=', 'initial')]"/>
                    <filter string="Follow-up" name="follow_up" domain="[('meeting_type', '=', 'follow_up')]"/>
                    <filter string="Review" name="review" domain="[('meeting_type', '=', 'review')]"/>
                    <filter string="Final" name="final" domain="[('meeting_type', '=', 'final')]"/>

                    <!-- Group By -->
                    <group expand="0" string="Group By">
                        <filter string="State" name="group_state" context="{'group_by': 'state'}"/>
                        <filter string="Meeting Type" name="group_type" context="{'group_by': 'meeting_type'}"/>
                        <filter string="Student" name="group_student" context="{'group_by': 'student_id'}"/>
                        <filter string="Supervisor" name="group_supervisor" context="{'group_by': 'supervisor_id'}"/>
                        <filter string="Date" name="group_date" context="{'group_by': 'start_datetime:month'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- Meeting Action -->
        <record id="action_internship_meeting_list" model="ir.actions.act_window">
            <field name="name">Meetings</field>
            <field name="res_model">internship.meeting</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="context">{'search_default_my_meetings': 1}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Schedule your first meeting!
                </p>
                <p>
                    Organize meetings with students and supervisors to track internship progress.
                </p>
            </field>
        </record>

    </data>
</odoo>